(this["webpackJsonpvoting-app"]=this["webpackJsonpvoting-app"]||[]).push([[0],{269:function(e,t){},375:function(e,t,n){e.exports=n(626)},376:function(e,t,n){},383:function(e,t){},405:function(e,t){},407:function(e,t){},417:function(e,t){},419:function(e,t){},458:function(e,t){},463:function(e,t){},465:function(e,t){},489:function(e,t){},548:function(e,t){},626:function(e,t,n){"use strict";n.r(t);n(376);var a,r=n(0),o=n.n(r),c=n(16),l=n.n(c),i=n(24),u=function(e){a=e.error};function s(e){var t="string"===typeof e?e:e.toString();u({error:t})}function d(){u({})}var p=r.createContext({setError:s,clearError:d}),m=function(){return r.useContext(p)};function f(e){var t=r.useState({}),n=Object(i.a)(t,2),o=n[0],c=n[1];u=c,a&&(c({error:a}),a=void 0);var l={error:o.error,setError:s,clearError:d};return r.createElement(p.Provider,{value:l},e.children)}var h=n(5),b=n.n(h),g=n(18),x=n(343),v=n(145),E=n(69);function k(){var e="burner-wallet",t=localStorage.getItem(e);if(t)return t;var n=E.Bip39.encode(E.Random.getBytes(16)).toString();return localStorage.setItem(e,n),n}function w(){return y.apply(this,arguments)}function y(){return(y=Object(g.a)(b.a.mark((function e(){var t,n,a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k(),e.next=3,v.Secp256k1Pen.fromMnemonic(t);case 3:return n=e.sent,a=Object(v.encodeSecp256k1Pubkey)(n.pubkey),r=Object(v.pubkeyToAddress)(a,"secret"),o=function(e){return n.sign(e)},e.abrupt("return",{address:r,signer:o});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(e,t){var n=function(e,t,n){return{amount:[{amount:Math.floor(e*n).toString(),denom:t}],gas:e.toString()}};return{upload:n(1e6,e,t),init:n(5e5,e,t),exec:n(2e5,e,t),send:n(8e4,e,t)}};function O(){return(O=Object(g.a)(b.a.mark((function e(t,n){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.address,r=n.signer,o=new v.SigningCosmWasmClient(t,a,r,void 0,j("uscrt",1)),e.abrupt("return",{address:a,client:o});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S={loading:!0,address:"",getClient:function(){throw new Error("not yet initialized")}},C=r.createContext(S),I=function(){return r.useContext(C)};function F(e){return r.createElement(P,{config:e.config,loadWallet:w},e.children)}function P(e){var t=Object(r.useState)(S),n=Object(i.a)(t,2),a=n[0],o=n[1],c=m().setError,l=e.config,u=e.loadWallet;return Object(r.useEffect)((function(){u().then((function(e){return function(e,t){return O.apply(this,arguments)}(l.httpUrl,e)})).then(function(){var e=Object(g.a)(b.a.mark((function e(t){var n,a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.address,a=t.client,!l.faucetUrl){e.next=14;break}return e.prev=2,e.next=5,a.getAccount();case 5:if(null===(c=e.sent)||void 0===c||null===(r=c.balance)||void 0===r?void 0:r.length){e.next=9;break}return e.next=9,x.a.post(l.faucetUrl,{json:{ticker:"SCRT",address:n}});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:o({loading:!1,address:n,getClient:function(){return a}});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()).catch(c)}),[l.httpUrl,l.faucetUrl,u,c]),r.createElement(C.Provider,{value:a},e.children)}function H(){}var T=r.createContext({refreshAccount:H}),_=function(){return r.useContext(T)};function B(e){var t=r.useState({}),n=Object(i.a)(t,2),a=n[0],o=n[1],c=I(),l=c.loading,u=c.getClient,s=m().setError,d=function(){l||u().getAccount().then((function(e){return o({account:e})})).catch(s)};r.useEffect(d,[l,u,s]);var p={refreshAccount:d,account:a.account};return r.createElement(T.Provider,{value:p},e.children)}function q(){}var W=o.a.createContext({refreshBlockHeight:q}),A=function(){return o.a.useContext(W)};function M(e){var t=o.a.useState({}),n=Object(i.a)(t,2),a=n[0],c=n[1],l=I(),u=l.loading,s=l.getClient,d=m().setError;Object(r.useEffect)((function(){var e=setInterval((function(){p()}),5e3);return function(){return clearInterval(e)}}),[]);var p=function(){u||s().getHeight().then((function(e){return c({blockHeight:e})})).catch(d)};o.a.useEffect(p,[u,s,d]);var f={refreshBlockHeight:p,blockHeight:a.blockHeight};return o.a.createElement(W.Provider,{value:f},e.children)}var N=n(676),z=n(674),R=Object(z.a)({root:{height:"40px",width:"100%",background:"#ebf5fc",border:"none",outline:"none",borderRadius:"20px",padding:"5px 15px",fontSize:"20px",fontWeight:500,color:"#3d5af1",boxShadow:"-2px -2px 6px rgba(255, 255, 255, 1), 2px 2px 6px rgba(0, 0, 0, 0.1)","&:hover":{boxShadow:"-2px -2px 6px rgba(255, 255, 255, 1), 2px 2px 6px rgba(0, 0, 0, 0.1)",background:"#ebf5fc"},"&:active":{boxShadow:"inset -2px -2px 6px rgba(255, 255, 255, 1), inset 2px 2px 6px rgba(0, 0, 0, 0.1)",background:"#ebf5fc"}}});function D(e){var t=R();return r.createElement(N.a,Object.assign({disableElevation:!0,disableFocusRipple:!0,disableRipple:!0,className:t.root},e))}var V=n(706),L=n(678);function U(e){var t=e.error,n=e.clearError;return r.createElement(V.a,{severity:"error",onClose:n},r.createElement(L.a,null,"Error"),t)}var G=n(680),Q=n(681),J=n(628),Y=n(81),$=n(679),K=n(708),X=n(111),Z=n(39),ee=n(707),te=Object(z.a)((function(e){var t,n,a;return Object(ee.a)({contractLogicContainer:{display:"flex",flexDirection:"column",alignItems:"center"},table:{background:"#ebf5fc",boxShadow:"-5px -5px 15px rgba(255, 255, 255, 0.8), 5px 5px 10px rgba(0, 0, 0, 0.1)",borderRadius:"25px"},instructions:{background:"#ebf5fc",boxShadow:"-5px -5px 15px rgba(255, 255, 255, 0.8), 5px 5px 10px rgba(0, 0, 0, 0.1)",borderRadius:"25px"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},heading:{background:"#ebf5fc",boxShadow:"-5px -5px 15px rgba(255, 255, 255, 0.8), 5px 5px 10px rgba(0, 0, 0, 0.1)",borderRadius:"25px"},card:(n={width:"80vw",margin:"10px",padding:"20px",background:"#ebf5fc",boxShadow:"-5px -5px 15px rgba(255, 255, 255, 0.8), 5px 5px 10px rgba(0, 0, 0, 0.1)",borderRadius:"25px",minWidth:"800px","& ul":Object(Z.a)({listStyleType:"none",padding:"0",margin:"0"},e.breakpoints.up("sm"),{marginBlockStart:"1em",marginBlockEnd:"1em"}),"& li":(t={display:"grid",gridTemplateColumns:"1fr",fontSize:".75em","& p:first-child":{marginBottom:".2em"},"& p:last-child":{marginTop:".2em"}},Object(Z.a)(t,e.breakpoints.up("sm"),{gridTemplateColumns:"25% 75%",fontSize:".9em","& p:first-child":{margin:".5em 0.05em"},"& p:last-child":{margin:".5em 0.05em"}}),Object(Z.a)(t,e.breakpoints.up("md"),{gridTemplateColumns:"20% 80%",fontSize:"1em","& p:first-child":{margin:".5em 0.1"},"& p:last-child":{margin:".5em .1em"}}),t),"& li p:first-child":{color:"#3d5af1"}},Object(Z.a)(n,e.breakpoints.up("sm"),{width:"75vw",margin:"20px",padding:"30px 20px"}),Object(Z.a)(n,e.breakpoints.up("md"),{width:"60vw",padding:"30px 40px"}),n),dashboardContainer:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1},blockHeight:{padding:e.spacing(1),marginLeft:e.spacing(50),flexGrow:1},account:{padding:e.spacing(1)},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerContainer:{overflow:"auto"},content:{flexGrow:1,padding:e.spacing(3)},listCard:(a={flexDirection:"column-reverse",textAlign:"center",width:"95vw",margin:"5px",padding:"10px 5px",borderRadius:"116px",background:"#ebf5fc",boxShadow:"-5px -5px 15px rgba(255, 255, 255, 0.8), 5px 5px 10px rgba(0, 0, 0, 0.1)","&:hover":{boxShadow:"inset -5px -5px 10px rgba(255,255,255,0.5), inset 5px 5px 10px rgba(0,0,0,0.05)"},"& .MuiListItemText-secondary":{fontSize:"13px"}},Object(Z.a)(a,e.breakpoints.up("sm"),{width:"70vw",margin:"20px",padding:"30px 40px","& .MuiListItemText-secondary":{fontSize:"14px"}}),Object(Z.a)(a,e.breakpoints.up("md"),{flexDirection:"row",textAlign:"left",width:"60vw","& .MuiListItemText-secondary":{fontSize:"15px"}}),a),link:{textDecoration:"none",color:"#3d5af1"},createPollDialog:{background:"#ebf5fc",height:"550px"},createPollTitle:{background:"#ebf5fc"},createPollForm:Object(Z.a)({background:"#ebf5fc",boxShadow:"-5px -5px 5px rgba(255, 255, 255, 0.8), 5px 5px 10px rgba(0, 0, 0, 0.1)",display:"flex",justifyContent:"space-around",padding:"10px","& p":{fontSize:"0.75rem"},"& .MuiFormHelperText-root.Mui-error":{marginTop:"0"}},e.breakpoints.up("sm"),{height:"440px",width:"350px",justifyContent:"space-around",margin:"20px",padding:"20px","& p":{fontSize:"1rem"},"& .MuiFormHelperText-root.Mui-error":{marginTop:"3px"}}),form:Object(Z.a)({background:"#ebf5fc",boxShadow:"-5px -5px 15px rgba(255, 255, 255, 0.8), 5px 5px 10px rgba(0, 0, 0, 0.1)",borderRadius:"25px",display:"flex",flexDirection:"column",justifyContent:"space-around",padding:"10px","& p":{fontSize:"0.75rem"},"& .MuiFormHelperText-root.Mui-error":{marginTop:"0"}},e.breakpoints.up("sm"),{height:"250px",justifyContent:"space-around",margin:"20px",padding:"20px","& p":{fontSize:"1rem"},"& .MuiFormHelperText-root.Mui-error":{marginTop:"3px"}}),tokenOps:{background:"#ebf5fc",minWidth:"130px",borderRadius:"25px",maxWidth:"200px",display:"flex",flexDirection:"column",justifyContent:"space-around"},tokenForm:Object(Z.a)({background:"#ebf5fc",display:"flex",flexDirection:"column","& p":{fontSize:"0.75rem"},"& .MuiFormHelperText-root.Mui-error":{marginTop:"0"}},e.breakpoints.up("sm"),{justifyContent:"space-around",margin:"5px",padding:"10px","& p":{fontSize:"1rem"},"& .MuiFormHelperText-root.Mui-error":{marginTop:"3px"}}),pollInput:{display:"flex","& input":{minWidth:"100px"}},quorumCol:{display:"flex",minWidth:"40px"},tokenOpsInput:{display:"flex","& input":{height:"30px",background:"#ebf5fc",border:"none",outline:"none",borderRadius:"20px",padding:"5px 15px",fontSize:"14px",color:"#3d5af1",boxShadow:"inset -2px -2px 6px rgba(255, 255, 255, 1), inset 2px 2px 6px rgba(0, 0, 0, 0.1);"}},input:{display:"flex","& input":{height:"30px",width:"100%",background:"#ebf5fc",border:"none",outline:"none",borderRadius:"20px",padding:"5px 15px",fontSize:"18px",color:"#3d5af1",boxShadow:"inset -2px -2px 6px rgba(255, 255, 255, 1), inset 2px 2px 6px rgba(0, 0, 0, 0.1);"}},createPollCancel:{width:"50%",color:"secondary",padding:"15px 15px"},createPollSubmit:{width:"50%",padding:"15px 15px"},createPollInput:{display:"flex","& input":{height:"25px",background:"#ebf5fc",border:"none",outline:"none",padding:"15px 15px",fontSize:"14px",color:"#3d5af1",boxShadow:"inset -2px -2px 6px rgba(255, 255, 255, 1), inset 2px 2px 6px rgba(0, 0, 0, 0.1);"}},bottomSpacer:{marginBottom:"8px"}})})),ne=n(42);function ae(e){return e?re(e.denom,e.amount):"0"}function re(e,t){if(!t)return"0";if(e.startsWith("u")){var n=e.slice(1).toUpperCase();return ne.Decimal.fromAtomics(t,6).toString()+"\u202f"+n}return t+"\u202f"+e}function oe(e){return Math.floor(parseFloat(e)*Math.pow(10,6)).toString()}function ce(){var e=te(),t=A().blockHeight;return o.a.createElement(Y.a,{variant:"h6",className:e.blockHeight}," Latest Block Height: ",t," ")}function le(e){var t=e.children,n=Object($.a)({disableHysteresis:!0,threshold:0});return r.cloneElement(t,{elevation:n?4:0})}function ie(e,t){var n=e.account,a=e.address,o=(e.children,n?function(e){return e&&0!==e.length?e.map(ae).join(", "):"\u2013"}(n.balance):r.createElement("span",null,"(No funds - Go get some"," ",r.createElement("a",{href:"https://faucet.secrettestnet.io",rel:"noopener noreferrer",target:"_blank"},"from the faucet"),")")),c=te();return r.createElement(r.Fragment,null,r.createElement(le,t,r.createElement(G.a,{position:"fixed",className:c.appBar},r.createElement(Q.a,null,r.createElement(X.b,{to:"/",className:c.account},r.createElement(J.a,{edge:"start",color:"inherit"},r.createElement(K.a,null))),r.createElement(Y.a,{variant:"h6"},a," - ",o),r.createElement(ce,null)))),r.createElement(Q.a,null))}function ue(){return r.createElement(Y.a,{variant:"h2"},"Loading Wallet...")}var se=n(682),de=Object(z.a)((function(e){return Object(ee.a)({root:{flexGrow:1,height:"102vh",background:"#ebf5fc"}})}));function pe(e){var t=e.children,n=de();return r.createElement(se.a,{className:n.root,container:!0,spacing:3,justify:"center"},r.createElement(se.a,{item:!0,xs:12,sm:10,md:8},t))}var me=function(){var e=m(),t=e.error,n=e.clearError;return t?r.createElement(U,{error:t,clearError:n}):r.createElement("div",null)};var fe=function(e){return I().loading?r.createElement(r.Fragment,null,r.createElement(ue,null),r.createElement(me,null)):r.createElement(pe,null,e.children)},he={httpUrl:"https://bootstrap.secrettestnet.io",faucetUrl:"https://faucet.secrettestnet.io",codeId:3},be=n(19),ge=n(686),xe=n(709),ve=n(683),Ee=n(684),ke=n(685),we=n(345),ye=n.n(we);function je(e){var t=e.address,n=e.label,a=te();return r.createElement("div",{className:a.dashboardContainer},r.createElement(X.b,{className:a.link,to:"/contract/".concat(t)},r.createElement(ve.a,{className:a.listCard},r.createElement(Ee.a,null,r.createElement(xe.a,null,r.createElement(ye.a,null))),r.createElement(ke.a,{primary:n,secondary:t}))))}var Oe=he.codeId;var Se=function(){var e=I().getClient,t=m().setError,n=r.useState([]),a=Object(i.a)(n,2),o=a[0],c=a[1];return r.useEffect((function(){e().getContracts(Oe).then((function(e){return c(e)})).catch(t)}),[e,t]),r.createElement(ge.a,null,o.map((function(e){return r.createElement(je,Object.assign({},e,{key:e.address}))})))};var Ce=function(){var e=_().account,t=I().address;return r.createElement(ie,{account:e,address:t})},Ie=n(9),Fe=n(170),Pe=n(58),He=n(354),Te=n(704),_e=function(e){var t=e.type,n=e.placeholder,a=e.disabled,o=e.InputProps,c=Object(He.a)(e,["type","placeholder","disabled","InputProps"]),l=Object(Pe.c)(c),u=Object(i.a)(l,2),s=u[0],d=u[1],p=d.error&&d.touched?d.error:"";return"number"===t?r.createElement(Te.a,Object.assign({id:"outlined-number",type:t,label:n,InputProps:o},s,{helperText:p,error:!!p,disabled:a})):r.createElement(Te.a,Object.assign({type:t,placeholder:n,InputProps:o,fullWidth:!0},s,{helperText:p,error:!!p}))},Be=n(54),qe=Be.b().shape({withdrawAmountField:Be.a().min(1e-6,"Invalid withdraw amount")}),We=Be.b().shape({stakeAmountField:Be.a().min(1e-6,"Invalid stake amount")}),Ae=Be.b().shape({descriptionField:Be.c().min(3,"Min length").max(64,"Max length").required("Required"),quorumField:Be.a().min(0,"Invalid quorum").max(100,"Invalid quorum").required("Required"),startHeightField:Be.a(),endHeightField:Be.a()}),Me=(Be.b().shape({weightField:Be.a().min(1,"Invalid weight").required("Weight required")}),function(e){var t=e.handleStake,n=e.tokenBalance,a=te();return r.createElement(Pe.b,{initialValues:{stakeAmountField:""},validationSchema:We,onSubmit:function(){var e=Object(g.a)(b.a.mark((function e(n,a){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.stakeAmountField,o=a.setSubmitting;try{r=oe(r),o(!0),t({stakeAmountField:r})}catch(c){console.error(c)}case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit;return r.createElement(Pe.a,{onSubmit:t,className:a.tokenForm},r.createElement("div",{className:a.tokenOpsInput},r.createElement(_e,{placeholder:"0",name:"stakeAmountField",type:"text"})),r.createElement("div",null,r.createElement(D,{type:"submit",disabled:!n},"Stake")))}))}),Ne=function(e){var t=e.handleWithdraw,n=e.stakedBalance,a=te();return r.createElement(Pe.b,{initialValues:{withdrawAmountField:""},validationSchema:qe,onSubmit:function(){var e=Object(g.a)(b.a.mark((function e(n,a){var r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.withdrawAmountField,o=a.setSubmitting,r=oe(r),o(!0),t({withdrawAmountField:r});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit;return r.createElement(Pe.a,{onSubmit:t,className:a.tokenForm},r.createElement("div",{className:a.tokenOpsInput},r.createElement(_e,{placeholder:"0",name:"withdrawAmountField",type:"text"})),r.createElement("div",null,r.createElement(D,{type:"submit",disabled:!n},"Withdraw")))}))},ze=n(687);function Re(e){var t=e.denom,n=e.tokenBalance,a=e.stakedBalance;return r.createElement("div",null,r.createElement(Y.a,{variant:"h6"},"Dashboard"),r.createElement(se.a,{container:!0,spacing:10,justify:"space-between"},r.createElement(se.a,{item:!0,xs:6},r.createElement(ze.a,null,"Total voting power: ",a&&re(t,String(0|a)))),r.createElement(se.a,{item:!0,xs:6},r.createElement(ze.a,null,"My voting power: ",n&&function(e,t){if(!t||0===t.length)return"\u2013";var n=t.filter((function(t){return t.denom===e})).map(ae);return n.length>0?n[0]:""}(t,Object(Fe.coins)(0|n,t))))))}var De=n(689),Ve=n(691),Le=n(690),Ue=n(692),Ge=function(e){var t=e.handleCreatePoll,n=e.loading,a=te(),o=r.useState(!1),c=Object(i.a)(o,2),l=c[0],u=c[1],s=function(){u(!1)};return r.createElement("div",null,r.createElement(D,{type:"submit",disabled:n,onClick:function(){u(!0)}},"Create New Poll"),r.createElement(De.a,{open:l,onClose:s,"aria-labelledby":"form-dialog-title"},r.createElement(Le.a,{className:a.createPollTitle,id:"form-dialog-title"},"Create New Poll"),r.createElement(Ve.a,{className:a.createPollDialog},r.createElement(Pe.b,{initialValues:{quorumField:"0",descriptionField:"",startHeightField:"",endHeightField:""},validationSchema:Ae,onSubmit:function(){var e=Object(g.a)(b.a.mark((function e(n,a){var r,o,c,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.quorumField,o=n.descriptionField,c=n.startHeightField,l=n.endHeightField,(0,a.setSubmitting)(!0),t({quorumField:r,descriptionField:o,startHeightField:c,endHeightField:l}),s();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},(function(e){var t=e.handleSubmit;return r.createElement(Pe.a,{onSubmit:t,className:a.createPollForm},r.createElement("div",{className:a.createPollInput},r.createElement(se.a,{container:!0,direction:"row"},r.createElement(se.a,{item:!0,xs:12},r.createElement(Ue.a,{control:r.createElement(_e,{placeholder:"",name:"quorumField",type:"number",required:!1,disabled:!0}),label:"Quorum",labelPlacement:"end"})),r.createElement(se.a,{item:!0,xs:12},r.createElement(Ue.a,{control:r.createElement(_e,{placeholder:"",name:"descriptionField",type:"text",required:!0}),label:"Description",labelPlacement:"end"})),r.createElement(se.a,{item:!0,xs:12},r.createElement(Ue.a,{control:r.createElement(_e,{placeholder:"",name:"startHeightField",type:"number"}),label:"Start height",labelPlacement:"end"})),r.createElement(se.a,{item:!0,xs:12},r.createElement(Ue.a,{control:r.createElement(_e,{placeholder:"",name:"endHeightField",type:"number"}),label:"End height",labelPlacement:"end"})),r.createElement(se.a,{item:!0,xs:5},r.createElement(D,{type:"reset",onClick:s},"Cancel")),r.createElement(se.a,{item:!0,xs:5},r.createElement(D,{type:"submit",disabled:n},"Create")))))})))))},Qe=n(183),Je=n(711),Ye=n(694),$e=n(695),Ke=n(349),Xe=n.n(Ke),Ze=n(350),et=n.n(Ze),tt=n(696);function nt(e){var t=te();return o.a.createElement("div",null,o.a.createElement(Je.a,{className:t.instructions},o.a.createElement(Ye.a,{expandIcon:o.a.createElement(Xe.a,null),"aria-controls":"instructions-content",id:"instructions-header"},o.a.createElement(Y.a,{variant:"h6"},"Instructions"),o.a.createElement(et.a,null)),o.a.createElement($e.a,null,o.a.createElement(Y.a,null,"Welcome to Privote, a privacy-first voting app on Secret Network.",o.a.createElement("br",null),"This platform allows users to create pools with parameters like participation threshold (quorum) and vote duration.",o.a.createElement("br",null),"Once a pool is created, any participant can stake SCRT to vote on the pool in a privacy-preserving manner.",o.a.createElement("br",null),"This means users can prove they voted, but their vote will remain encrypted. Secret voting is critical for mitigating bribery attacks.",o.a.createElement("br",null),"For more on secret voting and why you should care, please read our blog post (TBD)",o.a.createElement("br",null),o.a.createElement(tt.a,{href:"https://learn.scrt.network/questions.html"},"Secret Network FAQ")))))}var at=n(629),rt=n(697);function ot(e){var t=e.loading,n=te();return o.a.createElement("div",null,o.a.createElement(at.a,{className:n.backdrop,open:t},o.a.createElement(rt.a,{color:"inherit"})))}var ct=n(705),lt=n(4),it=n(701),ut=n(703),st=n(698),dt=n(700),pt=n(702),mt=n(699),ft=n(356),ht=n(352),bt=n.n(ht),gt=n(353),xt=n.n(gt),vt=n(351),Et=n.n(vt);function kt(e){var t=e.loading,n=e.address,a=e.poll,c=e.handleTallyPoll,l=e.handleRefreshPoll,i=e.blockHeight;Object(r.useEffect)((function(){var e=setInterval((function(){l(a)}),5e3);return function(){return clearInterval(e)}}),[]);var u=function(){return!a.endHeight||a.endHeight<i},s=function(){return"InProgress"===a.status},d=function(){return a.creator===n};return o.a.createElement("div",null,s()&&o.a.createElement(J.a,{type:"submit",disabled:!(u()&&!t&&d()&&s()),onClick:function(e){return c(a)}},o.a.createElement(Et.a,null)," Tally"))}var wt=Object(lt.a)((function(e){return{head:{fontSize:15,fontWeight:"bold"},body:{fontSize:14}}}))(st.a),yt=Object(lt.a)((function(e){return{root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(mt.a);function jt(e){var t=te(),n=I().address,a=e.handleCastVote,r=e.handleTallyPoll,c=e.handleRefreshPoll,l=e.loading,u=e.poll,s=e.blockHeight,d=e.stakedBalance,p=o.a.useState({}),m=Object(i.a)(p,2),f=m[0],h=m[1],b=function(){return!!u.endHeight&&u.endHeight<=s},g=function(){return!(!d||!f.pollWeight)&&f.pollWeight<=d},x=function(){var e=f.pollWeight;return!(b()||!e||"InProgress"!==u.status)};return o.a.createElement(yt,{key:u.pollId},o.a.createElement(wt,null,o.a.createElement(J.a,{disabled:!x(),color:"primary",onClick:function(){g()&&!b()&&f.pollWeight&&a("yes",u,f.pollWeight)},"aria-label":"Yea"},o.a.createElement(bt.a,null)),o.a.createElement(J.a,{disabled:!x(),color:"secondary",onClick:function(){g()&&!b()&&f.pollWeight&&a("no",u,f.pollWeight)},"aria-label":"Nay"},o.a.createElement(xt.a,null))),o.a.createElement(wt,{size:"small",align:"left"},o.a.createElement(Te.a,{className:t.pollInput,name:"weightField",type:"number",disabled:"InProgress"!==u.status,onChange:function(e){return function(e){e.preventDefault();var t=oe(e.target.value);t&&parseInt(t)>0&&parseInt(t)<=d&&h({pollWeight:parseInt(t)})}(e)}})),o.a.createElement(wt,{align:"left",component:"th",scope:"row"},u.description),o.a.createElement(wt,{align:"right"},u.quorum?"".concat(u.quorum,"%"):"none"),o.a.createElement(wt,{align:"right"},function(){if(u.endHeight){var e=u.endHeight-s;if(e>0){var t=6*e,n=Math.floor(t/86400),a=Math.floor(t%86400/3600),r=Math.floor(t%3600/60),o=Math.floor(t%60);return n>0?"~".concat(n," days ").concat(a,"h"):"".concat(a,"h ").concat(r,"m ").concat(o,"s")}return""}}()),o.a.createElement(wt,{align:"right"},u.status),o.a.createElement(wt,{align:"right"},o.a.createElement(kt,{address:n,handleTallyPoll:r,blockHeight:s,loading:l,handleRefreshPoll:c,poll:u})))}var Ot=Object(lt.a)((function(e){return{head:{fontSize:15,fontWeight:"bold"},body:{fontSize:14}}}))(st.a);function St(e){var t=te(),n=A(),a=n.blockHeight,c=n.refreshBlockHeight,l=e.handleCastVote,i=e.handleTallyPoll,u=e.handleRefreshPoll,s=e.loading,d=e.polls,p=e.contractAddress,m=e.stakedBalance;return Object(r.useEffect)((function(){var e=setInterval((function(){c()}),5e3);return function(){return clearInterval(e)}}),[]),o.a.createElement("div",null,o.a.createElement(dt.a,{component:ft.a},o.a.createElement(it.a,{className:t.table,size:"small","aria-label":"List of polls"},o.a.createElement(pt.a,null,o.a.createElement(mt.a,null,o.a.createElement(Ot,null,"Vote"),o.a.createElement(Ot,{align:"left"},"Weight"),o.a.createElement(Ot,{align:"left"},"Description"),o.a.createElement(Ot,{align:"right"},"Quorum"),o.a.createElement(Ot,{align:"right"},"Time remaining"),o.a.createElement(Ot,{align:"right"},"Status"),o.a.createElement(Ot,{align:"right"}))),o.a.createElement(ut.a,null,Array.from(d.values()).map((function(e){return o.a.createElement(jt,{stakedBalance:m,contractAddress:p,poll:e,loading:s,handleCastVote:l,handleRefreshPoll:u,handleTallyPoll:i,blockHeight:a||0})}))))))}function Ct(e,t,n,a,r,o,c){return{pollId:e,creator:t,description:n,quorum:a,status:r,startHeight:o,endHeight:c}}function It(e){var t=te(),n=e.contractAddress,a=e.denom,o=I(),c=o.address,l=o.getClient,u=m().setError,s=_().refreshAccount,d=Object(Qe.b)().enqueueSnackbar,p=r.useState({loading:!1}),f=Object(i.a)(p,2),h=f[0],x=f[1],v=function(){var e=Object(g.a)(b.a.mark((function e(t){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!0})),r=[Object(Fe.coin)(parseInt(t.stakeAmountField)||0,a||"")],e.prev=2,e.next=5,l().execute(n,{stake_voting_tokens:{}},"",r);case 5:return C("Staked tokens","success"),e.next=8,j();case 8:s(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),u(e.t0),x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1}));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.withdrawAmountField||"0",x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!0})),r={withdraw_voting_tokens:{}},parseInt(a)>0&&(r={withdraw_voting_tokens:{amount:a}}),C("Withdrew tokens","success"),e.prev=5,e.next=8,l().execute(n,r);case 8:s(),j(),x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),u(e.t0),x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1}));case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(g.a)(b.a.mark((function e(t,a,r){var o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={cast_vote:{weight:String(r),vote:t,poll_id:a.pollId}},x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!0})),e.prev=2,e.next=5,l().execute(n,o);case 5:C("Vote cast","success"),s(),x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),u(e.t0),x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1}));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),w=function(){var e=Object(g.a)(b.a.mark((function e(t){var a,r,o,c,i,d;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={end_poll:{poll_id:t.pollId}},x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!0})),e.prev=2,e.next=5,l().execute(n,a);case 5:o=e.sent,c=o.logs[0].events[1].attributes,i=c.find((function(e){return"passed"===e.key})),i&&"true"===i.value?(t.status="Passed",C("Poll passed","success")):(i=c.find((function(e){return"rejected_reason"===e.key})),d=i&&i.value,C("Poll rejected: ".concat(d),"error"),t.status=d),null===(r=h.polls)||void 0===r||r.set(t.pollId,t),s(),x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),u(e.t0),x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1}));case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(g.a)(b.a.mark((function e(t,a,r){var o,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new Map,x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!0})),i=b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c,e.next=3,l().queryContractSmart(n,{poll:{poll_id:t}}).then((function(e){var n=e.creator,a=e.status,r=e.quorum_percentage,c=e.description,l=e.end_height,i=e.start_height;o.set(t,Ct(t,n,c,r,a,i,l))})).catch((function(e){u(e)}));case 3:case"end":return e.stop()}}),e)})),c=t;case 4:if(!(c>0)){e.next=9;break}return e.delegateYield(i(),"t0",6);case 6:c--,e.next=4;break;case 9:x(Object(Ie.a)(Object(Ie.a)({},h),{},{polls:o,loading:!1,stakedBalance:a,tokenBalance:r,pollCount:t}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();r.useEffect((function(){x({loading:!0}),l().queryContractSmart(n,{token_stake:{address:c}}).then((function(e){return e})).then((function(e){l().queryContractSmart(n,{config:{}}).then((function(t){y(t.poll_count,t.staked_tokens,e.token_balance)}))})).catch((function(e){x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1})),u(e)}))}),[n]);var j=function(){var e=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().queryContractSmart(n,{token_stake:{address:c}}).then((function(e){l().queryContractSmart(n,{config:{}}).then((function(t){y(t.poll_count,t.staked_tokens,e.token_balance)}))})).catch((function(e){x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1})),u(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(g.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l().queryContractSmart(n,{poll:{poll_id:t.pollId}}).then((function(e){t.status=e.status})).catch((function(e){u(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var t=Object(g.a)(b.a.mark((function t(a){var r,o,c,i,s,d,p,m,f,g,v;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.quorumField,o=a.descriptionField,c=a.startHeightField,i=a.endHeightField,t.next=6,l().getHeight();case 6:if(s=t.sent,!(i&&parseInt(i)>0)){t.next=16;break}if(s){t.next=13;break}return u("Failed to create poll, error getting block height"),t.abrupt("return");case 13:if(!(s>parseInt(i))){t.next=16;break}return u("Poll cannot end in the past"),t.abrupt("return");case 16:return x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!0})),d={quorum_percentage:parseInt(r),description:o},c&&(p=parseInt(c),d.start_height=p),i&&(m=parseInt(i),d.end_height=m),t.prev=20,t.next=23,l().execute(e.contractAddress,{create_poll:d});case 23:if(f=t.sent,void 0!==(g=f.logs[0].events[1].attributes.find((function(e){return"poll_id"===e.key})))){t.next=29;break}return x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1})),u("failed to create poll"),t.abrupt("return");case 29:return C("Poll created","success"),v=parseInt(g.value),t.next=33,l().queryContractSmart(n,{poll:{poll_id:v}}).then((function(e){var t=e.creator,n=e.status,a=e.quorum_percentage,r=e.description,o=h.polls||new Map;o.set(v,Ct(v,t,r,a,n,e.start_height,e.end_height)),x(Object(Ie.a)(Object(Ie.a)({},h),{},{polls:o}))})).catch((function(e){u(e)}));case 33:t.next=38;break;case 35:t.prev=35,t.t0=t.catch(20),u(t.t0);case 38:x(Object(Ie.a)(Object(Ie.a)({},h),{},{loading:!1}));case 39:case"end":return t.stop()}}),t,null,[[20,35]])})));return function(e){return t.apply(this,arguments)}}();function C(e,t){d(e,{variant:t})}return r.createElement(ct.a,{width:"100%"},r.createElement(ct.a,{width:"100%",p:1,my:.5},r.createElement(nt,null)),r.createElement("div",{className:t.card},r.createElement(ot,{loading:h.loading}),r.createElement(se.a,{container:!0,spacing:3},r.createElement(se.a,{item:!0,xs:12},a&&r.createElement(Re,{denom:a,stakedBalance:h.stakedBalance,tokenBalance:h.tokenBalance})),r.createElement(se.a,{item:!0,xs:12},r.createElement(Ge,{handleCreatePoll:S,loading:h.loading})),r.createElement(se.a,{item:!0,xs:2},r.createElement(se.a,{container:!0,spacing:1,className:t.tokenOps},r.createElement(Y.a,{variant:"h6"},"Token Operations:"),r.createElement(se.a,{item:!0,xs:12},r.createElement(Me,{handleStake:v,tokenBalance:h.tokenBalance})),r.createElement(se.a,{item:!0,xs:12},r.createElement(Ne,{handleWithdraw:E,stakedBalance:h.stakedBalance})))),r.createElement(se.a,{item:!0,xs:10},h.polls&&h.stakedBalance&&r.createElement(St,{contractAddress:n,polls:h.polls,stakedBalance:h.stakedBalance,loading:h.loading,handleTallyPoll:w,handleCastVote:k,handleRefreshPoll:O})))))}var Ft={address:"",owner:"",stakedTokens:0,pollCount:0,denom:""};var Pt=function(e){var t=e.address,n=I().getClient,a=m().setError,o=r.useState(Ft),c=Object(i.a)(o,2),l=c[0],u=c[1];return r.useEffect((function(){n().getContract(t).then((function(e){u(Object(Ie.a)(Object(Ie.a)({},e),{},{address:t})),n().queryContractSmart(t,{config:{}}).then((function(e){u({address:t,stakedTokens:e.staked_tokens,pollCount:e.poll_count,denom:e.denom})}))})).catch(a)}),[a,t,n]),r.createElement("div",null,l.denom&&r.createElement("div",null,r.createElement(It,{contractAddress:t,owner:l.owner||"",denom:l.denom})))};var Ht=function(){var e=Object(be.f)().address;return o.a.createElement(Pt,{address:e||""})},Tt=function(){return o.a.createElement(X.a,{basename:"/"},o.a.createElement(Ce,null),o.a.createElement(me,null),o.a.createElement(be.c,null,o.a.createElement(be.a,{exact:!0,path:"/",component:Se}),o.a.createElement(be.a,{exact:!0,path:"/contract/:address",component:Ht})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _t(){return(_t=Object(g.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("serviceWorker"in navigator)){e.next=3;break}return e.next=3,navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bt,qt=document.getElementById("root");Bt=Tt,l.a.render(o.a.createElement(Qe.a,{maxSnack:3},o.a.createElement(f,null,o.a.createElement(F,{config:he},o.a.createElement(M,null,o.a.createElement(B,null,o.a.createElement(fe,null,o.a.createElement(Bt,null))))))),qt),function(){_t.apply(this,arguments)}()}},[[375,1,2]]]);
//# sourceMappingURL=main.c0b31a6e.chunk.js.map